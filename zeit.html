<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Relativistische Zeit v4</title>
<style>
body {
    font-family: -apple-system, sans-serif;
    text-align: center;
    background: #111;
    color: white;
    margin: 0;
    padding: 30px;
}
.card {
    background: #1e1e1e;
    padding: 25px;
    border-radius: 20px;
    margin-bottom: 25px;
}
.speed {
    font-size: 28px;
}
.total, .moment, .days {
    font-size: 38px;
    font-weight: bold;
}
.button {
    padding: 12px 25px;
    font-size: 16px;
    border-radius: 12px;
    border: none;
    background: #ff4757;
    color: white;
}
</style>
</head>
<body>

<h2> Relativistisch gesparte Zeit</h2>

<div class="card">
    <div>Geschwindigkeit</div>
    <div class="speed"><span id="speed">0</span> km/h</div>
</div>

<div class="card">
    <div>Momentaner Zeitverlust</div>
    <div class="moment"><span id="moment">0 · 10^0</span> Sekunden</div>
</div>

<div class="card">
    <div>Gesamt gesparte Zeit</div>
    <div class="total"><span id="total">0 · 10^0</span> Sekunden</div>
</div>

<div class="card">
    <div>Simulation: Wie viele Tage jünger nach 100 Jahren</div>
    <div class="days"><span id="days">0,000 · 10^0</span> Tage</div>
</div>

<button onclick="reset()">Reset</button>

<script>
const c = 299792458; // m/s
let totalLoss = 0;
let lastTime = Date.now();

function formatScientific(num) {
    if (num === 0) return "0 · 10^0";
    let exponent = Math.floor(Math.log10(Math.abs(num)));
    let mantissa = num / Math.pow(10, exponent);
    return mantissa.toFixed(3).replace('.', ',') + " · 10^" + exponent;
}

function update(position) {
    let now = Date.now();
    let dt = (now - lastTime) / 1000;
    lastTime = now;

    let v = position.coords.speed || 0; // m/s
    let lossMoment = (v*v)/(2*c*c) * dt;
    totalLoss += lossMoment;

    let kmh = v * 3.6;

    // Update Geschwindigkeit
    document.getElementById("speed").innerText = kmh.toFixed(2).replace('.', ',');

    // Momentaner Verlust
    document.getElementById("moment").innerText = formatScientific(lossMoment);

    // Gesamtverlust
    document.getElementById("total").innerText = formatScientific(totalLoss);

    // Simulation 100 Jahre
    const seconds100Years = 100 * 365.25 * 24 * 3600;
    let total100Y = (v*v)/(2*c*c) * seconds100Years;
    let days100Y = total100Y / 86400; // in Tagen
    document.getElementById("days").innerText = formatScientific(days100Y);
}

function reset() {
    totalLoss = 0;
}

navigator.geolocation.watchPosition(update,
    err => alert("GPS aktivieren!"),
    { enableHighAccuracy: true }
);
</script>

</body>
</html>
